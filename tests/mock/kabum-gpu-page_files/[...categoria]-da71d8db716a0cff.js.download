(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8659],{13618:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[...categoria]",function(){return a(59286)}])},90063:function(e,t,a){"use strict";a.d(t,{AI:function(){return useBannerMonetizaSplashG},M1:function(){return useBannerMonetizaDepartments},fn:function(){return useBannerMonetizaSplashP},po:function(){return useBannerMonetizaPdp}});var n=a(88767),o=a(15981),s=a(19017),r=a(28812),i=a(99300),l=a.n(i),d=a(19537);function useBannerMonetizaDepartments(e){let{departmentName:t,sectionName:a,placementType:i,categoryName:c,subcategoryName:u,menuId:p}=e,{session:m,clientId:_}=(0,o.a)(),g={departamentos:(0,s.V)({mobile:"department_mobile",tablet:"department_tablet",desktop:"department_default",desktopLarge:"department_default"}),listagem:(0,s.V)({mobile:"listagem_mobile",tablet:"listagem_tablet",desktop:"listagem_desktop",desktopLarge:"listagem_desktop"})},f=g[i];return(0,n.useQuery)(["getDeparmentsBanner",f,p],()=>(0,r.l)(l(),{..._&&{user_id:_},session_id:m,menu_id:String(null!=p?p:0),origin:"department_mobile"===f||"listagem_mobile"===f?"mobile":"desktop",context:"category",category_name:(0,d.w)(t,a,c,u)||"Departamentos",placements:{[i]:{quantity:1,size:f,types:["banner"]}}}),{enabled:!!m,staleTime:6e5})}function useBannerMonetizaSplashP(){let{session:e,clientId:t}=(0,o.a)(),a=(0,s.V)({mobile:"splash_p_mobile",tablet:"splash_p_tablet",desktop:"splash_p_desktop",desktopLarge:"splash_p_desktop"});return(0,n.useQuery)(["getBannerSplashP",a],()=>(0,r.l)(l(),{...t&&{user_id:t},session_id:e,origin:"splash_p_mobile"===a?"mobile":"desktop",context:"category",category_name:"SPLASH_P",placements:{splash_p:{quantity:2,size:a,types:["banner"]}}}),{enabled:!!e,staleTime:6e5})}function useBannerMonetizaSplashG(){let{session:e,clientId:t}=(0,o.a)(),a=(0,s.V)({mobile:"splash_g_mobile",tablet:"splash_g_tablet",desktop:"splash_g_desktop",desktopLarge:"splash_g_desktop"});return(0,n.useQuery)(["getBannerSplashG",a],()=>(0,r.l)(l(),{...t&&{user_id:t},session_id:e,origin:"splash_g_mobile"===a?"mobile":"desktop",context:"category",category_name:"SPLASH_G",placements:{splash_g:{quantity:1,size:a,types:["banner"]}}}),{enabled:!!e,staleTime:6e5})}function useBannerMonetizaPdp(e){let{productCode:t,departmentName:a,sectionName:i,categoryName:c,subCategoryName:u,brandName:p}=e,{session:m,clientId:_}=(0,o.a)(),g=(0,s.V)({mobile:"pdp_mobile",tablet:"pdp_tablet",desktop:"pdp_desktop",desktopLarge:"pdp_desktop_large"});return(0,n.useQuery)(["getBannerPdp",g],()=>(0,r.l)(l(),{..._&&{user_id:_},session_id:m,origin:"pdp_mobile"===g?"mobile":"desktop",context:"product_page",product_attributes:{category_name:(0,d.w)(a,i,c,u),brand:p},product_sku:t,placements:{pdp:{quantity:1,size:g,types:["banner"]}}}),{enabled:!!m,staleTime:6e5})}},59286:function(e,t,a){"use strict";a.r(t),a.d(t,{__N_SSP:function(){return A},default:function(){return Categorias}});var n=a(85893),o=a(15981),s=a(9609),r=a(15597),i=a(40791),l=a(28593),d=a(14106),c=a(87066),u=a(3429),p=a(17984),m=a(51004),_=a(90063),g=a(72707),f=a(79624),b=a(53405),y=a(11163),h=a(67294),v=a(88767),S=a(65695),k=a.n(S),w=a(70641),P=a(73821),B=a(99300),M=a(30772),T=a(88132),N=a(19537),I=a(27178),x=a(4541),L=a(15852),C=a(36300),z=a(41100),E=a(31945),j=a(76248);let useUserSelector=e=>({clientId:e.clientId,session:e.session,validSession:e.validSession,isPrime:e.isPrime});var A=!0;function Categorias(e){var t,a;let{data:S}=e;S=JSON.parse(S);let{type:A,slug:q,seo:F,catalogServer:H,categories:U,breadcrumbServer:D=[],pagelist:O,cookieIsMobile:Q,banners:V}=S,G=new P.k,{init:K,params:R,setParams:Z,setLoading:X,setCatalog:J,catalog:W,filterPressed:Y}=(0,g.r)(),{clientId:$,session:ee,validSession:et,isPrime:ea}=(0,o.a)(useUserSelector,j.X),en=(0,b.Z)(),eo=(0,y.useRouter)(),[es,er]=(0,h.useState)(!(null==H?void 0:H.data)),[ei,el]=(0,h.useState)(!0),[ed,ec]=(0,h.useState)(!1),[eu,ep]=(0,h.useState)(!0),extractBreadcrumbInfo=(e,t)=>{var a,n;return{name:(null===(a=e[t])||void 0===a?void 0:a.name)||"",id:(null===(n=e[t])||void 0===n?void 0:n.id)||""}},{name:em,id:e_}=extractBreadcrumbInfo(D,0),{name:eg,id:ef}=extractBreadcrumbInfo(D,1),{name:eb,id:ey}=extractBreadcrumbInfo(D,2),{name:eh,id:ev}=extractBreadcrumbInfo(D,3),eS=[e_,ef,ey,ev].filter(Boolean).join(":"),{data:ek,isLoading:ew}=(0,_.M1)({placementType:"listagem",departmentName:em,sectionName:eg,categoryName:eb,subcategoryName:eh,menuId:eS}),eP=(null==ek?void 0:ek.listagem)&&(null==ek?void 0:ek.listagem[0]),{headers:eB,params:eM}=(0,L.a)({clientId:$,session:ee,query:(0,N.w)(em,eg,eb,eh),context:"category"}),onFocus=()=>{fetchTimestamp()},{data:eT,isLoading:eN}=(0,v.useQuery)({queryKey:["getSponsoredProducts",R.facet_filters||Number(R.page_number),ed],queryFn:()=>G.getSponsoredProducts(eB,eM),enabled:(0,C.R)(R)&&ed,retry:!1});async function fetchTimestamp(){en.setLoading(!0);let{data:e}=await c.default.get(B.BACKEND_TIME_STAMP);en.setTimestamp(e),en.setLoading(!1)}async function verifySponsoredProductsFeatureEnabled(){let e=await (0,E.s)();ec(e),ep(!1)}async function fetchCatalog(){let e;window.scrollTo({top:0,behavior:"smooth"}),X(!0);try{let t={...R,payload_data:"products_category_filters"};e=await k().productsByCategory(q,t),J(e)}catch(e){er(!0)}finally{let e=Y===M.v.BACK;if(!e){let e=Y===M.v.PAGINATION,t=(0,w.getParamsFromQueryString)(window.location.search);k().replaceUrlParams(new URLSearchParams(Object.assign(t,R)),e)}X(!1)}}return(0,h.useEffect)(()=>{let e;!function(){let{query:e}=eo,t=null==e?void 0:e["search-term"];if(t){let{"search-term":a,...n}=e;(0,s.y)({"search-term":decodeURIComponent(t)}),eo.replace({query:n},void 0,{shallow:!0})}}();let{facet_filters:t}=S.params;if(t)try{e=JSON.parse("".concat((0,T.t)(t)))}catch(t){e={}}K({params:S.params,products:S.products,filters:e,listingType:A}),fetchTimestamp()},[]),(0,h.useEffect)(()=>(window.onpopstate=()=>{let e=(0,w.getParamsFromQueryString)(window.location.search);Z({facet_filters:(0,r.M)(null==e?void 0:e.facet_filters,""),sort:(0,r.M)(null==e?void 0:e.sort,"most_searched"),page_size:(0,r.M)(Number(null==e?void 0:e.page_size),20),page_number:(0,r.M)(Number(e.page_number),1),is_prime:ea},M.v.BACK)},window.addEventListener("focus",onFocus),()=>{window.removeEventListener("focus",onFocus)}),[]),(0,h.useEffect)(()=>{verifySponsoredProductsFeatureEnabled()},[et,ee]),(0,f.D)(()=>{ei?el(!1):fetchCatalog()},[R]),es?(0,n.jsx)(p.Z,{cookieIsMobile:Q}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.Z,{title:null==F?void 0:F.title,metaTitle:null==F?void 0:F.titleHeading,metaDescription:null==F?void 0:F.description,metaImage:(null==V?void 0:null===(t=V.catalogList)||void 0===t?void 0:t.mediaUrl)||(null==V?void 0:null===(a=V.main)||void 0===a?void 0:a.banner),hasMetaTwitter:!0,hasCanonical:!0,hasMetaOg:!0,children:!!W&&(0,n.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:(0,z.BV)(W.data,q)}})}),(0,n.jsx)("script",{id:"SmartHint_PageType",type:"application/javascript",children:'const SmartHint_PageType = "category";'}),(0,n.jsx)(u.Z,{bannersAds:eP,isLoadingBanner:ew,type:A,banners:V,categories:U,onProductClick:e=>{let t=[{name:e.name,id:e.code.toString(),price:e.price,brand:e.manufacturer.name,category:e.category,position:e.position,dimension20:Number((0,I.u)(null==e?void 0:e.sellerId)),dimension21:e.sellerName||"KaBuM!",dimension01:(0,i.n)(e.code)}];(0,l.U)({products:t,list:O}),(null==e?void 0:e.newtail)&&(0,d.q)(null==e?void 0:e.newtail.clickUrl,(0,x.S)($,ee))},sponsoredProducts:eT,loadingSponsoredProducts:eu||eN,catalogServer:H,breadcrumbServer:D,pagelist:O,titleHeading:null==F?void 0:F.titleHeading,cookieIsMobile:Q})]})}},19537:function(e,t,a){"use strict";function formatCategoryName(e,t,a,n){return t&&a&&n?"".concat(e," > ").concat(t," > ").concat(a," > ").concat(n):t&&a?"".concat(e," > ").concat(t," > ").concat(a):t?"".concat(e," > ").concat(t):e}a.d(t,{w:function(){return formatCategoryName}})}},function(e){e.O(0,[9334,9871,5695,6167,9382,3357,9774,2888,179],function(){return e(e.s=13618)}),_N_E=e.O()}]);
//# sourceMappingURL=[...categoria]-da71d8db716a0cff.js.map